{"remainingRequest":"/home/yd/company/demo/vue-cli3/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/yd/company/demo/vue-cli3/src/pc-project/components/fj-datepicker/fj-datepicker.vue?vue&type=style&index=0&id=4c512809&scoped=true&lang=less&","dependencies":[{"path":"/home/yd/company/demo/vue-cli3/src/pc-project/components/fj-datepicker/fj-datepicker.vue","mtime":1644831193685},{"path":"/home/yd/company/demo/vue-cli3/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/yd/company/demo/vue-cli3/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/yd/company/demo/vue-cli3/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/yd/company/demo/vue-cli3/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/yd/company/demo/vue-cli3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/yd/company/demo/vue-cli3/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmRhdGUtd3JhcGVyewogIHBvc2l0aW9uOmFic29sdXRlOwogIGJhY2tncm91bmQ6ICNmZmY7CiAgd2lkdGg6NDQwcHg7CiAgYm9yZGVyLXJhZGl1czogNXB4OwogIGJvcmRlcjoxcHggc29saWQgI2Q4ZDhkODsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgcGFkZGluZzo1cHggMDsKfQoudGl0bGV7CiAgLnByZXZ7Y3Vyc29yOiBwb2ludGVyO30KICAubmV4dHtjdXJzb3I6IHBvaW50ZXI7fQp9Ci53ZWVrLWl0ZW17d2lkdGg6IDMwcHg7ZGlzcGxheTogaW5saW5lLWJsb2NrO30KCi5kYXRle3dpZHRoOjIyMHB4O30KLmRhdGUtaXRlbXtjb2xvcjogI2NjYzt3aWR0aDogMzBweDtoZWlnaHQ6IDMwcHg7bGluZS1oZWlnaHQ6MzBweDtkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Y3Vyc29yOiBwb2ludGVyO3Bvc2l0aW9uOiByZWxhdGl2ZTsKICAudGFne3Bvc2l0aW9uOiBhYnNvbHV0ZTt0b3A6LThweDtyaWdodDotNXB4O2ZvbnQtc2l6ZTogMTJweDtmb250LXN0eWxlOiBub3JtYWw7dHJhbnNmb3JtOiBzY2FsZSguOCk7fQogICYuZGlzYWJsZWR7Y29sb3I6I2NjYztjdXJzb3I6IG5vLWRyb3A7fSAvKiDnpoHnlKjnmoTml6XmnJ8gKi8KICAmLmVuYWJsZWR7Y29sb3I6IzMzMzsvKiDlvZPliY3mnIjku73lj6/ku6Xngrnlh7vnmoTml6XmnJ8gKi8KICAgICY6aG92ZXJ7YmFja2dyb3VuZDogYmx1ZTtjb2xvcjojZmZmO2JvcmRlci1yYWRpdXM6IDMwcHg7fQogICAgJi5kb3VibGUucHJldjpob3ZlcntiYWNrZ3JvdW5kOiBub25lO2NvbG9yOiNjY2M7Y3Vyc29yOiBuby1kcm9wO30KICAgICYuZG91YmxlLm5leHQ6aG92ZXJ7YmFja2dyb3VuZDogbm9uZTtjb2xvcjojY2NjO2N1cnNvcjogbm8tZHJvcDt9CiAgfSAKICAmLmN1cnJlbnR7Y29sb3I6cmVkfSAvKiDlt7Lnu4/pgInkuK3nmoTml6XmnJ8gKi8KICAmLnByZXZ7Y29sb3I6I2NjY30gLyog5LiK5LiA5Liq5pyI5Ymp5L2Z5Yiw5pys5pyI55qE5pel5pyfICovCiAgJi5uZXh0e2NvbG9yOiNjY2N9IC8qIOS4i+S4gOS4quaciOWJqeS9meWIsOacrOaciOeahOaXpeacnyAqLwogICYudG9kYXl7Y29sb3I6IzAwYTBlOX0KICAmLmNsaWNrZWR7YmFja2dyb3VuZDogYmx1ZTtib3JkZXItcmFkaXVzOiA1MCU7Y29sb3I6I2ZmZn0KICAKfQoK"},{"version":3,"sources":["fj-datepicker.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"fj-datepicker.vue","sourceRoot":"src/pc-project/components/fj-datepicker","sourcesContent":["<template>\n    <div>\n        <input type=\"text\" readonly :value=\"activeMonth\" @blur=\"handleBlur($event)\" @click=\"handleClick($event)\" :placeholder=\"placeholder\" />\n        <div class=\"date-wraper\" :style=\"listStyle\" v-if=\"boxShow\" @click=\"boxEvent\">\n            <div v-for=\"(value, key, index) in dateData\" :key=\"index\" style=\"float: left;\">\n              <div class=\"title\">\n                <span class=\"prev\" @click=\"prev(key ,'year')\" v-if=\"index===0\"> 《 </span> \n                <span class=\"prev\" @click=\"prev(key ,'month')\" v-if=\"index===0\"> ← </span> \n                {{value.title}}\n                <span class=\"next\" @click=\"next(key ,'month')\" v-if=\"type!=='double' || index===1\"> → </span>\n                <span class=\"next\" @click=\"next(key ,'year')\"  v-if=\"type!=='double' || index===1\"> 》 </span>\n                </div>\n              <div class=\"week\">\n                <span class=\"week-item\">日</span>\n                <span class=\"week-item\">一</span>\n                <span class=\"week-item\">二</span>\n                <span class=\"week-item\">三</span>\n                <span class=\"week-item\">四</span>\n                <span class=\"week-item\">五</span>\n                <span class=\"week-item\">六</span>\n              </div>\n              <div class=\"date\">\n                <span v-for=\"(d, i) in value.date\" :key=\"i\" class=\"date-item\" \n                :class=\"[d.classname, type==='double'?' double':'']\" \n                @click=\"selectName(d)\">\n                    <!-- {{d.year}}-\n                    {{d.month}}- -->\n                    {{d.day}}\n                    <i class=\"tag\" v-if=\"d.tag && d.tag === 's'\">入</i>\n                    <i class=\"tag\" v-if=\"d.tag && d.tag === 'e'\">离</i>\n                    <i class=\"tag\" v-if=\"d.tag && d.tag === '今'\">今</i>\n                </span>\n              </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Vue, Prop, Emit, Model } from 'vue-property-decorator';\nimport { getPos, stopPropagation } from '@/utils';\nimport Datepicker from './datepicker'\nimport moment from 'moment'\n\n/**\n * @init(event: any)  父组件要调用此方法，穿如event以及v-model的属性名成\n * @activeMonth v-moddel 跟付组件通讯的\n * @listStyle控制当前组件的位置\n * @startEnabled： 可用的开始时间范围\n * @endEnabled 可用的结束时间范围\n * @type 双日历还是单日历（双日历可以选择入住时间以及离开时间）  'single' | 'double'\n */\n\n@Component\nexport default class FjDatepickerDoubleComponent extends Vue {\n    @Model('change') readonly activeMonth!: string | string[];\n    @Prop({ default: '', type: String }) private startEnabled!: string;\n    @Prop({ default: '', type: String }) private endEnabled!: string;\n    @Prop({ default: '', type: String }) private placeholder!: string;\n    @Prop({ default: 'single', type: String }) private type!: 'single' | 'double'; // single  double\n    \n    private listStyle: any = { 'pointer-events': 'auto' };\n    private boxShow = false;\n    private dateData: any = null;\n    private aotoemptyisShow = false;\n    private datepicker = new Datepicker();\n\n    private clickNum = 0;\n    private clickarr: string[] = [];\n\n    @Emit('change') private changeEmit(event: string | string[]) {}\n\n    created() {\n      document.addEventListener(\"click\", () => { \n        this.boxShow = false;\n        this.clickNum = 0;\n        this.clickarr = [];\n      });\n    }\n\n    handleBlur(event: any) {\n      // if(this.type === 'double'){\n      //   if(this.activeMonth1 && this.activeMonth2){\n      //     this.changeEmit(this.activeMonth1 +'~'+this.activeMonth2);\n      //   }\n        \n      // }else{\n        this.changeEmit(event.target.value);\n      // }\n    }\n    \n    selectName(item: any) {\n      if(item.classname&&item.classname.indexOf('disabled')!==-1) {\n        return;\n      }\n      if(this.type ==='double' && item.classname && \n      (item.classname.indexOf('next')!==-1 || item.classname.indexOf('prev')!==-1)){\n        return;\n      }\n      if(this.type==='double') {\n        if(this.clickNum < 2){\n          this.clickarr.push(`${item.year}-${item.month}-${item.day}`);\n          item.classname+=' clicked';\n          this.clickNum ++;\n        }\n        if(this.clickNum ===2){\n          let newclickarr = [];\n          if(moment(this.clickarr[0]).diff(moment(this.clickarr[1])) > 0){\n            newclickarr[0] = this.clickarr[1];\n            newclickarr[1] = this.clickarr[0];\n          }else{\n            newclickarr[0] = this.clickarr[0];\n            newclickarr[1] = this.clickarr[1];\n          }\n         this.clickarr = [...newclickarr]\n          if(this.clickarr.length === 2){\n            this.changeEmit(this.clickarr.join('~'));\n          }\n          this.boxShow = false;\n          this.clickNum = 0;\n          this.clickarr = [];\n        }        \n      }else{\n        const date = `${item.year}-${item.month}-${item.day}`;\n        this.changeEmit(date);\n        this.boxShow = false;\n      }\n    }\n\n    prev(date: any, type: 'month' | 'year') {\n      const d = moment(Number(date)).add(-1, type).format('YYYY-MM-DD');\n      const dateData: any = this.datepicker.init(this.startEnabled,this.endEnabled, this.activeMonth, d, this.type);\n      for(let key in dateData) {\n        const length = dateData[key].date.length-1;\n        if(dateData[key].date[length].classname.indexOf('disabled')!==-1) {\n          return;\n        }\n      }\n      this.dateData = dateData;\n    }\n\n    // 获取this.dateData中的最小月份\n    getMinDate() {\n      let minDate = ''\n      for(let key in this.dateData) {\n        if(minDate === ''){\n          minDate =  key;\n        }else{\n          minDate  = moment(Number(minDate)).diff(Number(minDate)) ? key : minDate;\n        }\n      }\n      return Number(minDate);\n    }\n      \n    next(date: any, type: 'month' | 'year') {\n      const d = moment(this.getMinDate()).add(1, type).format('YYYY-MM-DD');\n      \n      const dateData: any = this.datepicker.init(this.startEnabled,this.endEnabled, this.activeMonth, d, this.type);\n      for(let key in dateData) {\n        if(dateData[key].date[0].classname.indexOf('disabled')!==-1) {\n          return;\n        }\n      }\n      this.dateData = dateData;\n    }\n       \n    handleClick(event: any) {\n      this.dateData = this.datepicker.init(this.startEnabled,this.endEnabled, this.activeMonth,'', this.type);\n      this.init(event);\n\n      this.boxShow = false;\n      setTimeout(()=>{\n        stopPropagation(event);\n        this.boxShow = true;\n      },100)\n    }\n\n    init(event: any) {\n      const dom = event.target;\n      const _getPos = getPos(dom);\n      this.listStyle = {\n      ...this.listStyle,\n      // 'width': `${_getPos.width}px`,\n      width:this.type === 'double' ? '440px' :'220px',\n      'left': `${_getPos.left}px`,\n      'top': `${_getPos.top+_getPos.height}px`,\n      }\n    }\n    boxEvent(event: any) {\n        stopPropagation(event);\n    }\n}\n</script>\n\n<style scoped lang=\"less\">\n.date-wraper{\n  position:absolute;\n  background: #fff;\n  width:440px;\n  border-radius: 5px;\n  border:1px solid #d8d8d8;\n  text-align: center;\n  padding:5px 0;\n}\n.title{\n  .prev{cursor: pointer;}\n  .next{cursor: pointer;}\n}\n.week-item{width: 30px;display: inline-block;}\n\n.date{width:220px;}\n.date-item{color: #ccc;width: 30px;height: 30px;line-height:30px;display: inline-block;cursor: pointer;position: relative;\n  .tag{position: absolute;top:-8px;right:-5px;font-size: 12px;font-style: normal;transform: scale(.8);}\n  &.disabled{color:#ccc;cursor: no-drop;} /* 禁用的日期 */\n  &.enabled{color:#333;/* 当前月份可以点击的日期 */\n    &:hover{background: blue;color:#fff;border-radius: 30px;}\n    &.double.prev:hover{background: none;color:#ccc;cursor: no-drop;}\n    &.double.next:hover{background: none;color:#ccc;cursor: no-drop;}\n  } \n  &.current{color:red} /* 已经选中的日期 */\n  &.prev{color:#ccc} /* 上一个月剩余到本月的日期 */\n  &.next{color:#ccc} /* 下一个月剩余到本月的日期 */\n  &.today{color:#00a0e9}\n  &.clicked{background: blue;border-radius: 50%;color:#fff}\n  \n}\n\n</style>\n\n"]}]}