{"remainingRequest":"/home/yd/company/demo/vue-cli3/node_modules/babel-loader/lib/index.js!/home/yd/company/demo/vue-cli3/node_modules/ts-loader/index.js??ref--13-2!/home/yd/company/demo/vue-cli3/src/pc-project/store/modules/login.ts","dependencies":[{"path":"/home/yd/company/demo/vue-cli3/src/pc-project/store/modules/login.ts","mtime":1644831193685},{"path":"/home/yd/company/demo/vue-cli3/babel.config.js","mtime":1644831193685},{"path":"/home/yd/company/demo/vue-cli3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/yd/company/demo/vue-cli3/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/yd/company/demo/vue-cli3/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3lkL2NvbXBhbnkvZGVtby92dWUtY2xpMy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL2hvbWUveWQvY29tcGFueS9kZW1vL3Z1ZS1jbGkzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjay5qcyI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL2hvbWUveWQvY29tcGFueS9kZW1vL3Z1ZS1jbGkzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcy5qcyI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiL2hvbWUveWQvY29tcGFueS9kZW1vL3Z1ZS1jbGkzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cy5qcyI7CmltcG9ydCBfY3JlYXRlU3VwZXIgZnJvbSAiL2hvbWUveWQvY29tcGFueS9kZW1vL3Z1ZS1jbGkzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gInRzbGliIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgeyBNb2R1bGUsIFZ1ZXhNb2R1bGUsIE11dGF0aW9uLCBBY3Rpb24sIGdldE1vZHVsZSwgTXV0YXRpb25BY3Rpb24gfSBmcm9tICd2dWV4LW1vZHVsZS1kZWNvcmF0b3JzJzsKaW1wb3J0IFNlcnZpY2UgZnJvbSAnQC9wYy1wcm9qZWN0L3NlcnZpY2VzL2ludGVyZmFjZXMnOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9wYy1wcm9qZWN0L3N0b3JlJzsKdmFyICR2bSA9IG5ldyBWdWUoKTsKdmFyIHNlcnZpY2UgPSBuZXcgU2VydmljZSgpOwoKdmFyIExvZ2luU3RvcmUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9WdWV4TW9kdWxlKSB7CiAgX2luaGVyaXRzKExvZ2luU3RvcmUsIF9WdWV4TW9kdWxlKTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihMb2dpblN0b3JlKTsKCiAgZnVuY3Rpb24gTG9naW5TdG9yZSgpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTG9naW5TdG9yZSk7CgogICAgX3RoaXMgPSBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIF90aGlzLmxvZ2luSW5mbyA9IHsKICAgICAgdXNlcm5hbWU6ICcnLAogICAgICBpbWd1cmw6ICcnCiAgICB9OwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKExvZ2luU3RvcmUsIFt7CiAgICBrZXk6ICJjdXJVc2VyRGF0YSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3VyVXNlckRhdGEoZGF0YSkgewogICAgICB0aGlzLmxvZ2luSW5mbyA9IGRhdGE7CiAgICB9CiAgfSwgewogICAga2V5OiAibG9naW5PdXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvZ2luT3V0KHJvdXRlcikgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgICR2bS4kbGF5ZXIuY29uZmlybSh7CiAgICAgICAgdGV4dDogJ+ehruWumumAgOWHuj8nLAogICAgICAgIGVudGVyQnRuQ2FsbGJhY2s6IGZ1bmN0aW9uIGVudGVyQnRuQ2FsbGJhY2soKSB7CiAgICAgICAgICB2YXIgbG9hZGluZyA9ICR2bS4kbGF5ZXIubG9hZGluZygpOwogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzMi5jb250ZXh0LmNvbW1pdCgnY3VyVXNlckRhdGEnLCBudWxsKTsKCiAgICAgICAgICAgICR2bS4kbGF5ZXIuaGlkZShsb2FkaW5nKTsKICAgICAgICAgICAgJHZtLiRsYXllci50b2FzdCgn6YCA5Ye65oiQ5YqfJyk7CiAgICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICBwYXRoOiAnLycKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdMT0dJTklORk8nKTsKICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgnc3RvcmUnKTsKICAgICAgICAgIH0sIDIwMDApOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAibG9naW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9sb2dpbiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShwYXJhbXMpIHsKICAgICAgICB2YXIgcm91dGVyLCBsb2dpblBhcmFtcywgbG9naW5JbmZvLCByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByb3V0ZXIgPSBwYXJhbXMucm91dGVyLCBsb2dpblBhcmFtcyA9IHBhcmFtcy5sb2dpblBhcmFtczsKICAgICAgICAgICAgICAgIGxvZ2luSW5mbyA9IG51bGw7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlLnJlcXVlc3QoewogICAgICAgICAgICAgICAgICB1cmw6ICcvdXNlcicsCiAgICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiBsb2dpblBhcmFtcy51c2VyTmFtZSwKICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogbG9naW5QYXJhbXMucGFzcwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICR2bS4kbGF5ZXIudG9hc3QoJ+i0puWPt+aIluiAheWvhueggeS4jeato+ehricpOwogICAgICAgICAgICAgICAgICBsb2dpbkluZm8gPSBudWxsOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgaWYgKGxvZ2luUGFyYW1zLnVzZXJOYW1lID09PSByZXNwb25zZVswXS5uYW1lICYmIGxvZ2luUGFyYW1zLnBhc3MgPT09IHJlc3BvbnNlWzBdLnBhc3N3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgJHZtLiRsYXllci50b2FzdCgn55m75b2V5oiQ5YqfJyk7CiAgICAgICAgICAgICAgICAgICAgbG9naW5JbmZvID0gewogICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IHJlc3BvbnNlWzBdLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICBpbWd1cmw6IHJlc3BvbnNlWzBdLmltZ3VybAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ0xPR0lOSU5GTycsIEpTT04uc3RyaW5naWZ5KGxvZ2luSW5mbykpOwogICAgICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgIHBhdGg6ICcvbWFuYWdlJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgICAgICBsb2dpbkluZm86IGxvZ2luSW5mbwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBsb2dpbihfeCkgewogICAgICAgIHJldHVybiBfbG9naW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGxvZ2luOwogICAgfSgpCiAgfV0pOwoKICByZXR1cm4gTG9naW5TdG9yZTsKfShWdWV4TW9kdWxlKTsKCl9fZGVjb3JhdGUoW011dGF0aW9uXSwgTG9naW5TdG9yZS5wcm90b3R5cGUsICJjdXJVc2VyRGF0YSIsIG51bGwpOwoKX19kZWNvcmF0ZShbQWN0aW9uXSwgTG9naW5TdG9yZS5wcm90b3R5cGUsICJsb2dpbk91dCIsIG51bGwpOwoKX19kZWNvcmF0ZShbTXV0YXRpb25BY3Rpb24oewogIG11dGF0ZTogWydsb2dpbkluZm8nXQp9KV0sIExvZ2luU3RvcmUucHJvdG90eXBlLCAibG9naW4iLCBudWxsKTsKCkxvZ2luU3RvcmUgPSBfX2RlY29yYXRlKFtNb2R1bGUoewogIG5hbWU6ICdsb2dpbicsCiAgZHluYW1pYzogdHJ1ZSwKICBzdG9yZTogc3RvcmUKfSldLCBMb2dpblN0b3JlKTsKZXhwb3J0IGRlZmF1bHQgTG9naW5TdG9yZTsKZXhwb3J0IHZhciBMb2dpblN0b3JlTW9kdWxlID0gZ2V0TW9kdWxlKExvZ2luU3RvcmUpOw=="},{"version":3,"mappings":";;;;;;;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,SACIC,MADJ,EAEIC,UAFJ,EAGIC,QAHJ,EAIIC,MAJJ,EAKIC,SALJ,EAMIC,cANJ,QAOO,wBAPP;AASA,OAAOC,OAAP,MAAoB,kCAApB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AAGA,IAAMC,GAAG,GAAG,IAAIT,GAAJ,EAAZ;AACA,IAAMU,OAAO,GAAG,IAAIH,OAAJ,EAAhB;;AAKA,IAAqBI,UAAU;AAAA;;AAAA;;AAA/B;AAAA;;AAAA;;;AACI,sBAAyB;AACrBC,cAAQ,EAAE,EADW;AAErBC,YAAM,EAAE;AAFa,KAAzB;AADJ;AAwDC;;AAxD8B;AAAA;AAAA,WAO3B,qBAAYC,IAAZ,EAAsB;AACpB,WAAKC,SAAL,GAAiBD,IAAjB;AACD;AAT0B;AAAA;AAAA,WAY3B,kBAASE,MAAT,EAA0B;AAAA;;AACxBP,SAAG,CAACQ,MAAJ,CAAWC,OAAX,CAAmB;AACjBC,YAAI,EAAE,OADW;AAEjBC,wBAAgB,EAAE,4BAAK;AACrB,cAAMC,OAAO,GAAGZ,GAAG,CAACQ,MAAJ,CAAWI,OAAX,EAAhB;AACAC,oBAAU,CAAC,YAAK;AACd,kBAAI,CAACC,OAAL,CAAaC,MAAb,CAAoB,aAApB,EAAmC,IAAnC;;AACAf,eAAG,CAACQ,MAAJ,CAAWQ,IAAX,CAAgBJ,OAAhB;AACAZ,eAAG,CAACQ,MAAJ,CAAWS,KAAX,CAAiB,MAAjB;AACAV,kBAAM,CAACW,IAAP,CAAY;AAAEC,kBAAI,EAAE;AAAR,aAAZ;AACAC,wBAAY,CAACC,UAAb,CAAwB,WAAxB;AACAC,0BAAc,CAACD,UAAf,CAA0B,OAA1B;AACD,WAPS,EAOP,IAPO,CAAV;AAQD;AAZgB,OAAnB;AAcD;AA3B0B;AAAA;AAAA;AAAA,2EA8B3B,iBAAYE,MAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AACUhB,sBADV,GACkCgB,MADlC,CACUhB,MADV,EACkBiB,WADlB,GACkCD,MADlC,CACkBC,WADlB;AAEMlB,yBAFN,GAE+B,IAF/B;AAAA;AAAA,uBAG8BL,OAAO,CAACwB,OAAR,CAAgB;AAC1CC,qBAAG,EAAE,OADqC;AAE1CrB,sBAAI,EAAE;AAAEsB,wBAAI,EAAEH,WAAW,CAACI,QAApB;AAA8BC,4BAAQ,EAAEL,WAAW,CAACM;AAApD;AAFoC,iBAAhB,CAH9B;;AAAA;AAGQC,wBAHR;;AAOE,oBAAI,CAACA,QAAQ,CAACC,MAAd,EAAsB;AACpBhC,qBAAG,CAACQ,MAAJ,CAAWS,KAAX,CAAiB,WAAjB;AACAX,2BAAS,GAAG,IAAZ;AACD,iBAHD,MAGO;AACL,sBAAIkB,WAAW,CAACI,QAAZ,KAAyBG,QAAQ,CAAC,CAAD,CAAR,CAAYJ,IAArC,IACCH,WAAW,CAACM,IAAZ,KAAqBC,QAAQ,CAAC,CAAD,CAAR,CAAYF,QADtC,EACgD;AAC5C7B,uBAAG,CAACQ,MAAJ,CAAWS,KAAX,CAAiB,MAAjB;AACAX,6BAAS,GAAG;AACVH,8BAAQ,EAAE4B,QAAQ,CAAC,CAAD,CAAR,CAAYJ,IADZ;AAEVvB,4BAAM,EAAE2B,QAAQ,CAAC,CAAD,CAAR,CAAY3B;AAFV,qBAAZ;AAIAgB,gCAAY,CAACa,OAAb,CAAqB,WAArB,EAAkCC,IAAI,CAACC,SAAL,CAAe7B,SAAf,CAAlC;AACAC,0BAAM,CAACW,IAAP,CAAY;AAAEC,0BAAI,EAAE;AAAR,qBAAZ;AACD;AACJ;;AArBH,iDAsBS;AACLb,2BAAS,EAATA;AADK,iBAtBT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OA9B2B;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,EAASb,UAAT,CAA/B;;AAOI2C,YADC1C,QACD;;AAKA0C,YADCzC,MACD;;AAkBAyC,YADCvC,cAAc,CAAC;AAAEwC,QAAM,EAAE,CAAC,WAAD;AAAV,CAAD,CACf;;AA9BiBnC,UAAU,eAH9BV,MAAM,CAAC;AACJmC,MAAI,EAAE,OADF;AACWW,SAAO,EAAE,IADpB;AAC0BvC,OAAK,EAALA;AAD1B,CAAD,CAGwB,GAAVG,UAAU,CAAV;eAAAA;AA0DrB,OAAO,IAAMqC,gBAAgB,GAAG3C,SAAS,CAACM,UAAD,CAAlC","names":["Vue","Module","VuexModule","Mutation","Action","getModule","MutationAction","Service","store","$vm","service","LoginStore","username","imgurl","data","loginInfo","router","$layer","confirm","text","enterBtnCallback","loading","setTimeout","context","commit","hide","toast","push","path","localStorage","removeItem","sessionStorage","params","loginParams","request","url","name","userName","password","pass","response","length","setItem","JSON","stringify","__decorate","mutate","dynamic","LoginStoreModule"],"sourceRoot":"","sources":["/home/yd/company/demo/vue-cli3/src/pc-project/store/modules/login.ts"],"sourcesContent":["import Vue from 'vue';\nimport {\n    Module,\n    VuexModule,\n    Mutation,\n    Action,\n    getModule,\n    MutationAction,\n} from 'vuex-module-decorators';\nimport { User, UserLogin } from '@/domain/User';\nimport Service from '@/pc-project/services/interfaces';\nimport store from '@/pc-project/store';\nimport VueRouter from 'vue-router';\n\nconst $vm = new Vue();\nconst service = new Service();\n\n@Module({\n    name: 'login', dynamic: true, store,\n})\nexport default class LoginStore extends VuexModule {\n    loginInfo: User | null = {\n        username: '',\n        imgurl: '',\n    }\n\n    @Mutation\n    curUserData(data: User) {\n      this.loginInfo = data;\n    }\n\n    @Action\n    loginOut(router: VueRouter) {\n      $vm.$layer.confirm({\n        text: '确定退出?',\n        enterBtnCallback: () => {\n          const loading = $vm.$layer.loading();\n          setTimeout(() => {\n            this.context.commit('curUserData', null);\n            $vm.$layer.hide(loading);\n            $vm.$layer.toast('退出成功');\n            router.push({ path: '/' });\n            localStorage.removeItem('LOGININFO');\n            sessionStorage.removeItem('store');\n          }, 2000);\n        },\n      });\n    }\n\n    @MutationAction({ mutate: ['loginInfo'] })\n    async login(params: {router: VueRouter; loginParams: UserLogin}) {\n      const { router, loginParams } = params;\n      let loginInfo: User | null = null;\n      const response: any = await service.request({\n        url: '/user',\n        data: { name: loginParams.userName, password: loginParams.pass },\n      });\n      if (!response.length) {\n        $vm.$layer.toast('账号或者密码不正确');\n        loginInfo = null;\n      } else {\n        if (loginParams.userName === response[0].name\n          && loginParams.pass === response[0].password) {\n            $vm.$layer.toast('登录成功');\n            loginInfo = {\n              username: response[0].name,\n              imgurl: response[0].imgurl,\n            };\n            localStorage.setItem('LOGININFO', JSON.stringify(loginInfo));\n            router.push({ path: '/manage' });\n          }\n      }\n      return {\n        loginInfo,\n      };\n    }\n}\n\nexport const LoginStoreModule = getModule(LoginStore);\n"]}]}